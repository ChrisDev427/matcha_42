{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-772f8d5e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"swipe right,\", -1));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"match,\", -1));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  id: \"date\"\n}, \"date !\", -1));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"main--title fade-In\",\n    onOnclick: _cache[1] || (_cache[1] = (...args) => _ctx.fadeOutTitle && _ctx.fadeOutTitle(...args))\n  }, [_hoisted_2, _hoisted_3, _hoisted_4, _createElementVNode(\"button\", {\n    class: \"button-test\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.submitTest && $setup.submitTest(...args))\n  }, \"submit\")], 32), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"fileInput\",\n    multiple: \"\",\n    onChange: _cache[2] || (_cache[2] = (...args) => $setup.handleFileUpload && $setup.handleFileUpload(...args))\n  }, null, 32), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.submitPhotos && $setup.submitPhotos(...args))\n  }, \"Upload Photos\"), _createVNode(_component_router_link, {\n    class: \"create--account--btn\",\n    to: {\n      name: 'RegisterPage',\n      params: {}\n    }\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"span\", null, _toDisplayString(_ctx.$t(\"accountCreate_btn\")), 1)]),\n    _: 1\n  })]);\n}","map":{"version":3,"names":["class","_createElementVNode","id","_createElementBlock","_hoisted_1","onOnclick","_cache","args","_ctx","fadeOutTitle","_hoisted_2","_hoisted_3","_hoisted_4","onClick","$setup","submitTest","type","multiple","onChange","handleFileUpload","submitPhotos","_createVNode","_component_router_link","to","name","params","default","_withCtx","_toDisplayString","$t","_"],"sources":["/Users/axelfernandez/ecole42/cursus42/post_common_core/matcha/frontend/src/pages/HomePage.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"main--title fade-In\" @onclick=\"fadeOutTitle\">\n      <h1>swipe right,</h1>\n      <h1>match,</h1>\n      <h1 id=\"date\">date !</h1>\n      <button class=\"button-test\" @click=\"submitTest\">submit</button>\n    </div>\n    <input type=\"file\" id=\"fileInput\" multiple @change=\"handleFileUpload\" />\n    <button @click=\"submitPhotos\">Upload Photos</button>\n    <router-link\n      class=\"create--account--btn\"\n      :to=\"{ name: 'RegisterPage', params: {} }\"\n    >\n      <span>{{ $t(\"accountCreate_btn\") }}</span>\n    </router-link>\n  </div>\n\n</template>\n\n<script>\nimport { useI18n } from \"vue-i18n\";\nimport { onMounted, onUnmounted, ref } from \"vue\";\n\nexport default {\n  name: \"HomePage\",\n\n  setup() {\n    const { t } = useI18n();\n    // Utilisation de la fonction de traduction\n    const accountCreate = t(\"accountCreate\");\n    const selectedFiles = ref(null);\n    let ws;\n\n    // Initialisation de WebSocket\n    function initWebSocket() {\n      ws = new WebSocket('ws://localhost:8080/?id=66406489327b4f1c5543f281');\n\n      ws.onopen = function() {\n    console.log('Connection is open ...');\n    let message = JSON.stringify({type: 'test', userId:'' , message: 'Hello Server!'});\n    ws.send(message);\n};\n\nws.onmessage = function(messageEvent) {\n    console.log('Server says: ' + messageEvent.data);\n};\n\nws.onclose = function() {\n    console.log('Connection is closed.');\n};\n\n    }\n\n    // Nettoyer et fermer la connexion WebSocket lors du démontage du composant\n    function cleanupWebSocket() {\n      if (ws) {\n        ws.close();\n      }\n    }\n\n    function submitTest() {\n      let message = JSON.stringify({type: 'like', userId:'66406489327b4f1c5543f281' , message: {user: 'Axesnake', userLiked: 'Axou'}});\n      ws.send(message);\n    }\n\n    function handleFileUpload(event) {\n      selectedFiles.value = event.target.files;\n    }\n\n    async function submitPhotos() {\n  console.log(\"selectedFiles = \", selectedFiles.value);\n  if (!selectedFiles.value) {\n    alert(\"Please select files first.\");\n    return;\n  }\n\n  const formData = new FormData();\n  for (let file of selectedFiles.value) {\n    formData.append('photos', file);\n  }\n\n  // Vérification de ce qui est ajouté à formData\n  formData.forEach((value, key) => {\n    console.log(`${key}: ${value.name}`); // Assumant que 'value' est un fichier\n  });\n\n  try {\n    const response = await fetch('/updateUser', {\n      method: 'POST',\n      body: formData,\n      // En-tête Content-Type doit être omis pour permettre au navigateur de le définir\n      headers: {\n        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NjQxYmUwYmMyNjczNjYwN2NhZDg4NTciLCJlbWFpbCI6ImF4ZXNuYWtlQGhvdG1haWwuZnIiLCJpYXQiOjE3MTU1ODk4NjYsImV4cCI6MTcxNTU5MDc2Nn0.4ZrV0xNDSphQBBSQmKr9PA9jYuYkmt0WIOHqKZP5Wdw',\n      },\n    });\n    const result = await response.json();\n    console.log(result);\n  } catch (error) {\n    console.error('Error uploading files:', error);\n  }\n}\n\n    onMounted(initWebSocket);\n    onUnmounted(cleanupWebSocket);\n\n    return { accountCreate, submitTest, handleFileUpload, submitPhotos };\n  },\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\n.home {\n\n  display: grid;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  user-select: none;\n\n  .main--title {\n    // margin-top: 80px;\n    cursor: default;\n    height: fit-content;\n    margin-top: 50px;\n    h1 {\n      display: grid;\n      justify-content: center;\n      color: white;\n      text-transform: capitalize;\n      font-size: calc(min(5vw + 4.5vh, 150px));\n      font-weight: 500;\n      margin: 15px;\n    }\n\n    #date {\n      font-weight: 900;\n      text-transform: uppercase;\n    }\n    @media (min-width: 200px) and (max-width: 700px) {\n      margin-top: 100px;\n\n\n    }\n  }\n\n  .create--account--btn {\n    justify-self: center;\n    text-decoration: none;\n    height: fit-content;\n    z-index: 1200;\n    span {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      width: 200px;\n      border-radius: 15px;\n\n      color: rgb(255, 255, 255);\n\n      background-image: linear-gradient(to right, #ff24a7, #8890fe);\n      /* Dégradé de couleur */\n\n      font-size: 1.2rem;\n      font-weight: 500;\n      transition: all 0.4s;\n      cursor: pointer;\n\n      &:hover {\n        background-image: linear-gradient(to right, #ff24a78a, #8890fe90);\n        /* Dégradé de couleur */\n        color: rgb(107, 12, 138);\n        transform: scale(1.15);\n      }\n    }\n  }\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAM;gEAEbC,mBAAA,CAAqB,YAAjB,cAAY;gEAChBA,mBAAA,CAAe,YAAX,QAAM;gEACVA,mBAAA,CAAyB;EAArBC,EAAE,EAAC;AAAM,GAAC,QAAM;;;uBAJxBC,mBAAA,CAeM,OAfNC,UAeM,GAdJH,mBAAA,CAKM;IALDD,KAAK,EAAC,qBAAqB;IAAEK,SAAO,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAC,YAAA,IAAAD,IAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;MACrDG,UAAqB,EACrBC,UAAe,EACfC,UAAyB,EACzBX,mBAAA,CAA+D;IAAvDD,KAAK,EAAC,aAAa;IAAEa,OAAK,EAAAP,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEO,MAAA,CAAAC,UAAA,IAAAD,MAAA,CAAAC,UAAA,IAAAR,IAAA,CAAU;KAAE,QAAM,E,OAExDN,mBAAA,CAAwE;IAAjEe,IAAI,EAAC,MAAM;IAACd,EAAE,EAAC,WAAW;IAACe,QAAQ,EAAR,EAAQ;IAAEC,QAAM,EAAAZ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEO,MAAA,CAAAK,gBAAA,IAAAL,MAAA,CAAAK,gBAAA,IAAAZ,IAAA,CAAgB;gBACpEN,mBAAA,CAAoD;IAA3CY,OAAK,EAAAP,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEO,MAAA,CAAAM,YAAA,IAAAN,MAAA,CAAAM,YAAA,IAAAb,IAAA,CAAY;KAAE,eAAa,GAC3Cc,YAAA,CAKcC,sBAAA;IAJZtB,KAAK,EAAC,sBAAsB;IAC3BuB,EAAE,EAAE;MAAAC,IAAA;MAAAC,MAAA;IAAA;;IAZXC,OAAA,EAAAC,QAAA,CAcM,MAA0C,CAA1C1B,mBAAA,CAA0C,cAAA2B,gBAAA,CAAjCpB,IAAA,CAAAqB,EAAE,2B;IAdjBC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}