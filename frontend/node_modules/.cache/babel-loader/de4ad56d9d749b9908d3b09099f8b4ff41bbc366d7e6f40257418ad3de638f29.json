{"ast":null,"code":"import { useI18n } from \"vue-i18n\";\nimport { onMounted, onUnmounted, ref } from \"vue\";\nexport default {\n  name: \"HomePage\",\n  setup() {\n    const {\n      t\n    } = useI18n();\n    // Utilisation de la fonction de traduction\n    const accountCreate = t(\"accountCreate\");\n    const selectedFiles = ref(null);\n    let ws;\n\n    // Initialisation de WebSocket\n    function initWebSocket() {\n      ws = new WebSocket('ws://localhost:8080/?id=66406489327b4f1c5543f281');\n      ws.onopen = function () {\n        console.log('Connection is open ...');\n        let message = JSON.stringify({\n          type: 'test',\n          userId: '',\n          message: 'Hello Server!'\n        });\n        ws.send(message);\n      };\n      ws.onmessage = function (messageEvent) {\n        console.log('Server says: ' + messageEvent.data);\n      };\n      ws.onclose = function () {\n        console.log('Connection is closed.');\n      };\n    }\n\n    // Nettoyer et fermer la connexion WebSocket lors du démontage du composant\n    function cleanupWebSocket() {\n      if (ws) {\n        ws.close();\n      }\n    }\n    function submitTest() {\n      let message = JSON.stringify({\n        type: 'like',\n        userId: '66406489327b4f1c5543f281',\n        message: {\n          user: 'Axesnake',\n          userLiked: 'Axou'\n        }\n      });\n      ws.send(message);\n    }\n    function handleFileUpload(event) {\n      selectedFiles.value = event.target.files;\n    }\n    async function submitPhotos() {\n      console.log(\"selectedFiles = \", selectedFiles.value);\n      if (!selectedFiles.value) {\n        alert(\"Please select files first.\");\n        return;\n      }\n      const formData = new FormData();\n      for (let file of selectedFiles.value) {\n        formData.append('photos', file);\n      }\n\n      // Vérification de ce qui est ajouté à formData\n      formData.forEach((value, key) => {\n        console.log(`${key}: ${value.name}`); // Assumant que 'value' est un fichier\n      });\n      try {\n        const response = await fetch('/updateUser', {\n          method: 'POST',\n          body: formData,\n          // En-tête Content-Type doit être omis pour permettre au navigateur de le définir\n          headers: {\n            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NjQxYmUwYmMyNjczNjYwN2NhZDg4NTciLCJlbWFpbCI6ImF4ZXNuYWtlQGhvdG1haWwuZnIiLCJpYXQiOjE3MTU1ODk4NjYsImV4cCI6MTcxNTU5MDc2Nn0.4ZrV0xNDSphQBBSQmKr9PA9jYuYkmt0WIOHqKZP5Wdw'\n          }\n        });\n        const result = await response.json();\n        console.log(result);\n      } catch (error) {\n        console.error('Error uploading files:', error);\n      }\n    }\n    onMounted(initWebSocket);\n    onUnmounted(cleanupWebSocket);\n    return {\n      accountCreate,\n      submitTest,\n      handleFileUpload,\n      submitPhotos\n    };\n  }\n};","map":{"version":3,"names":["useI18n","onMounted","onUnmounted","ref","name","setup","t","accountCreate","selectedFiles","ws","initWebSocket","WebSocket","onopen","console","log","message","JSON","stringify","type","userId","send","onmessage","messageEvent","data","onclose","cleanupWebSocket","close","submitTest","user","userLiked","handleFileUpload","event","value","target","files","submitPhotos","alert","formData","FormData","file","append","forEach","key","response","fetch","method","body","headers","result","json","error"],"sources":["/Users/axelfernandez/ecole42/cursus42/post_common_core/matcha/frontend/src/pages/HomePage.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"main--title fade-In\" @onclick=\"fadeOutTitle\">\n      <h1>swipe right,</h1>\n      <h1>match,</h1>\n      <h1 id=\"date\">date !</h1>\n      <button class=\"button-test\" @click=\"submitTest\">submit</button>\n    </div>\n    <input type=\"file\" id=\"fileInput\" multiple @change=\"handleFileUpload\" />\n    <button @click=\"submitPhotos\">Upload Photos</button>\n    <router-link\n      class=\"create--account--btn\"\n      :to=\"{ name: 'RegisterPage', params: {} }\"\n    >\n      <span>{{ $t(\"accountCreate_btn\") }}</span>\n    </router-link>\n  </div>\n\n</template>\n\n<script>\nimport { useI18n } from \"vue-i18n\";\nimport { onMounted, onUnmounted, ref } from \"vue\";\n\nexport default {\n  name: \"HomePage\",\n\n  setup() {\n    const { t } = useI18n();\n    // Utilisation de la fonction de traduction\n    const accountCreate = t(\"accountCreate\");\n    const selectedFiles = ref(null);\n    let ws;\n\n    // Initialisation de WebSocket\n    function initWebSocket() {\n      ws = new WebSocket('ws://localhost:8080/?id=66406489327b4f1c5543f281');\n\n      ws.onopen = function() {\n    console.log('Connection is open ...');\n    let message = JSON.stringify({type: 'test', userId:'' , message: 'Hello Server!'});\n    ws.send(message);\n};\n\nws.onmessage = function(messageEvent) {\n    console.log('Server says: ' + messageEvent.data);\n};\n\nws.onclose = function() {\n    console.log('Connection is closed.');\n};\n\n    }\n\n    // Nettoyer et fermer la connexion WebSocket lors du démontage du composant\n    function cleanupWebSocket() {\n      if (ws) {\n        ws.close();\n      }\n    }\n\n    function submitTest() {\n      let message = JSON.stringify({type: 'like', userId:'66406489327b4f1c5543f281' , message: {user: 'Axesnake', userLiked: 'Axou'}});\n      ws.send(message);\n    }\n\n    function handleFileUpload(event) {\n      selectedFiles.value = event.target.files;\n    }\n\n    async function submitPhotos() {\n  console.log(\"selectedFiles = \", selectedFiles.value);\n  if (!selectedFiles.value) {\n    alert(\"Please select files first.\");\n    return;\n  }\n\n  const formData = new FormData();\n  for (let file of selectedFiles.value) {\n    formData.append('photos', file);\n  }\n\n  // Vérification de ce qui est ajouté à formData\n  formData.forEach((value, key) => {\n    console.log(`${key}: ${value.name}`); // Assumant que 'value' est un fichier\n  });\n\n  try {\n    const response = await fetch('/updateUser', {\n      method: 'POST',\n      body: formData,\n      // En-tête Content-Type doit être omis pour permettre au navigateur de le définir\n      headers: {\n        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NjQxYmUwYmMyNjczNjYwN2NhZDg4NTciLCJlbWFpbCI6ImF4ZXNuYWtlQGhvdG1haWwuZnIiLCJpYXQiOjE3MTU1ODk4NjYsImV4cCI6MTcxNTU5MDc2Nn0.4ZrV0xNDSphQBBSQmKr9PA9jYuYkmt0WIOHqKZP5Wdw',\n      },\n    });\n    const result = await response.json();\n    console.log(result);\n  } catch (error) {\n    console.error('Error uploading files:', error);\n  }\n}\n\n    onMounted(initWebSocket);\n    onUnmounted(cleanupWebSocket);\n\n    return { accountCreate, submitTest, handleFileUpload, submitPhotos };\n  },\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\n.home {\n\n  display: grid;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  user-select: none;\n\n  .main--title {\n    // margin-top: 80px;\n    cursor: default;\n    height: fit-content;\n    margin-top: 50px;\n    h1 {\n      display: grid;\n      justify-content: center;\n      color: white;\n      text-transform: capitalize;\n      font-size: calc(min(5vw + 4.5vh, 150px));\n      font-weight: 500;\n      margin: 15px;\n    }\n\n    #date {\n      font-weight: 900;\n      text-transform: uppercase;\n    }\n    @media (min-width: 200px) and (max-width: 700px) {\n      margin-top: 100px;\n\n\n    }\n  }\n\n  .create--account--btn {\n    justify-self: center;\n    text-decoration: none;\n    height: fit-content;\n    z-index: 1200;\n    span {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      width: 200px;\n      border-radius: 15px;\n\n      color: rgb(255, 255, 255);\n\n      background-image: linear-gradient(to right, #ff24a7, #8890fe);\n      /* Dégradé de couleur */\n\n      font-size: 1.2rem;\n      font-weight: 500;\n      transition: all 0.4s;\n      cursor: pointer;\n\n      &:hover {\n        background-image: linear-gradient(to right, #ff24a78a, #8890fe90);\n        /* Dégradé de couleur */\n        color: rgb(107, 12, 138);\n        transform: scale(1.15);\n      }\n    }\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}