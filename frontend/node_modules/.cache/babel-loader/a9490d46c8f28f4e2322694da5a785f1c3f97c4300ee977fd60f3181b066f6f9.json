{"ast":null,"code":"import { useI18n } from \"vue-i18n\";\nimport { ref, watch } from \"vue\";\nimport { validateEmail } from \"@/libft/libft.js\";\nexport default {\n  name: \"RegisterForm\",\n  // data() {\n  //     console.log(this.$store.getters.getConnected);\n  //     this.$store.commit('isConnected');\n  //     console.log(this.$store.getters.getConnected);\n  //     return {\n  //         aff: this.$store.state.connected\n  //     }\n\n  // }\n\n  setup() {\n    const maxLength = 15;\n\n    // Traduction ----------------------------------\n    const {\n      t\n    } = useI18n();\n    const registerTitle = t(\"registerTitle\");\n    const registerSubTitle = t(\"registerSubTitle\");\n    const userName = t(\"userName\");\n    const firstName = t(\"firstName\");\n    const lastName = t(\"lastName\");\n    const password = t(\"password\");\n    const passwordConfirm = t(\"passwordConfirm\");\n    const send = t(\"send\");\n\n    // Input Object --------------------------------\n    let inputs = ref({\n      userName: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      emailValid: false,\n      password: \"\",\n      repeatPassword: \"\",\n      samePassword: false\n    });\n    watch(inputs, newValue => {\n      if (newValue.email.length != 0) {\n        if (!validateEmail(newValue.email)) {\n          inputs.value.emailValid = false;\n          inputs.value.password = \"\";\n          inputs.value.repeatPassword = \"\";\n          inputs.value.samePassword = false;\n        } else {\n          inputs.value.emailValid = true;\n        }\n      }\n      if (newValue.password.length != 0) {\n        if (newValue.repeatPassword != inputs.value.password) {\n          inputs.value.samePassword = false;\n        } else {\n          inputs.value.samePassword = true;\n        }\n      }\n    }, {\n      deep: true\n    });\n\n    // const print = () => {\n    //     console.log(\n\n    //         inputs.value.userName,\n    //         ' ',\n    //         inputs.value.firstName,\n    //         ' ',\n\n    //         inputs.value.lastName,\n    //         ' ',\n\n    //         inputs.value.email,\n    //         ' ',\n\n    //         inputs.value.password\n    //     )\n    // }\n    async function getLocation() {\n      if ('geolocation' in navigator) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          console.log(\"Latitude: \" + position.coords.latitude);\n          console.log(\"Longitude: \" + position.coords.longitude);\n          inputs.value.location = JSON.stringify({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          });\n        }, function (error) {\n          console.error(\"Erreur de géolocalisation: \" + error.message);\n          inputs.value.location = \"Erreur de géolocalisation\";\n        }, {\n          maximumAge: 60000,\n          timeout: 5000,\n          enableHighAccuracy: true\n        });\n      } else {\n        console.error(\"Géolocalisation n'est pas prise en charge par ce navigateur.\");\n        inputs.value.location = \"Géolocalisation non prise en charge\";\n      }\n    }\n    async function submitForm() {\n      try {\n        await getLocation();\n        const response = await fetch(\"/submit-form\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(this.inputs)\n        });\n        console.log(response);\n      } catch (error) {\n        console.error(\"Error submitting form:\", error);\n      }\n    }\n    return {\n      getLocation,\n      registerTitle,\n      registerSubTitle,\n      userName,\n      firstName,\n      lastName,\n      password,\n      passwordConfirm,\n      send,\n      inputs,\n      maxLength,\n      validateEmail,\n      submitForm\n    };\n  }\n};","map":{"version":3,"names":["useI18n","ref","watch","validateEmail","name","setup","maxLength","t","registerTitle","registerSubTitle","userName","firstName","lastName","password","passwordConfirm","send","inputs","email","emailValid","repeatPassword","samePassword","newValue","length","value","deep","getLocation","navigator","geolocation","getCurrentPosition","position","console","log","coords","latitude","longitude","location","JSON","stringify","error","message","maximumAge","timeout","enableHighAccuracy","submitForm","response","fetch","method","headers","body"],"sources":["/Users/axelfernandez/ecole42/cursus42/post_common_core/matcha/frontend/src/components/forms/RegisterForm.vue"],"sourcesContent":["<template>\n  <div class=\"register--container\">\n    <h3>{{ $t(\"registerTitle\") }}</h3>\n    <h3 id=\"sub--title\">{{ $t(\"registerSubTitle\") }}</h3>\n    <form class=\"register--form\" @submit.prevent=\"submitForm\">\n      <input\n  v-model=\"inputs.location\"\n  type=\"text\"\n  :placeholder=\"$t('location')\"\n  readonly\n/>\n\n      <input\n        v-model=\"inputs.userName\"\n        :maxlength=\"maxLength\"\n        type=\"text\"\n        :placeholder=\"$t('userName')\"\n      />\n      <input\n        v-model=\"inputs.firstName\"\n        :maxlength=\"maxLength\"\n        type=\"text\"\n        :placeholder=\"$t('firstName')\"\n      />\n      <input\n        v-model=\"inputs.lastName\"\n        :maxlength=\"maxLength\"\n        type=\"text\"\n        :placeholder=\"$t('lastName')\"\n      />\n      <input\n        v-model=\"inputs.email\"\n        type=\"email\"\n        placeholder=\"e-mail\"\n        :class=\"{\n          'text-red': !validateEmail(inputs.email),\n          'text-green': validateEmail(inputs.email),\n        }\"\n      />\n      <input\n        v-model=\"inputs.password\"\n        :disabled=\"!inputs.emailValid\"\n        :class=\"{\n          'text-green': inputs.samePassword,\n          'disabled--input': !inputs.emailValid,\n        }\"\n        type=\"password\"\n        :placeholder=\"$t('password')\"\n      />\n      <input\n        v-model=\"inputs.repeatPassword\"\n        :disabled=\"!inputs.emailValid\"\n        :class=\"{\n          'text-red': !inputs.samePassword,\n          'text-green': inputs.samePassword,\n          'disabled--input': !inputs.emailValid,\n        }\"\n        type=\"password\"\n        :placeholder=\"$t('passwordConfirm')\"\n      />\n\n      <button\n        @click=\"submitForm\"\n        class=\"send--registration--btn\"\n        type=\"submit\"\n        :class=\"{\n          'disabled--btn':\n            !inputs.samePassword ||\n            !inputs.emailValid ||\n            !inputs.userName ||\n            !inputs.firstName ||\n            !inputs.lastName,\n        }\"\n      >\n        {{ $t(\"send\") }}\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { useI18n } from \"vue-i18n\";\nimport { ref, watch } from \"vue\";\nimport { validateEmail } from \"@/libft/libft.js\";\n\nexport default {\n  name: \"RegisterForm\",\n\n  // data() {\n  //     console.log(this.$store.getters.getConnected);\n  //     this.$store.commit('isConnected');\n  //     console.log(this.$store.getters.getConnected);\n  //     return {\n  //         aff: this.$store.state.connected\n  //     }\n\n  // }\n\n  setup() {\n    const maxLength = 15;\n\n    // Traduction ----------------------------------\n    const { t } = useI18n();\n    const registerTitle = t(\"registerTitle\");\n    const registerSubTitle = t(\"registerSubTitle\");\n    const userName = t(\"userName\");\n    const firstName = t(\"firstName\");\n    const lastName = t(\"lastName\");\n    const password = t(\"password\");\n    const passwordConfirm = t(\"passwordConfirm\");\n    const send = t(\"send\");\n\n    // Input Object --------------------------------\n    let inputs = ref({\n      userName: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      emailValid: false,\n      password: \"\",\n      repeatPassword: \"\",\n      samePassword: false,\n    });\n\n    watch(\n      inputs,\n      (newValue) => {\n        if (newValue.email.length != 0) {\n          if (!validateEmail(newValue.email)) {\n            inputs.value.emailValid = false;\n            inputs.value.password = \"\";\n            inputs.value.repeatPassword = \"\";\n            inputs.value.samePassword = false;\n          } else {\n            inputs.value.emailValid = true;\n          }\n        }\n        if (newValue.password.length != 0) {\n          if (newValue.repeatPassword != inputs.value.password) {\n            inputs.value.samePassword = false;\n          } else {\n            inputs.value.samePassword = true;\n          }\n        }\n      },\n      { deep: true }\n    );\n\n    // const print = () => {\n    //     console.log(\n\n    //         inputs.value.userName,\n    //         ' ',\n    //         inputs.value.firstName,\n    //         ' ',\n\n    //         inputs.value.lastName,\n    //         ' ',\n\n    //         inputs.value.email,\n    //         ' ',\n\n    //         inputs.value.password\n    //     )\n    // }\n    async function getLocation() {\n  if ('geolocation' in navigator) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      console.log(\"Latitude: \" + position.coords.latitude);\n      console.log(\"Longitude: \" + position.coords.longitude);\n      inputs.value.location = JSON.stringify({latitude : position.coords.latitude, longitude: position.coords.longitude});\n    }, function(error) {\n      console.error(\"Erreur de géolocalisation: \" + error.message);\n      inputs.value.location = \"Erreur de géolocalisation\";\n    }, {\n      maximumAge: 60000,\n      timeout: 5000,\n      enableHighAccuracy: true\n    });\n  } else {\n    console.error(\"Géolocalisation n'est pas prise en charge par ce navigateur.\");\n    inputs.value.location = \"Géolocalisation non prise en charge\";\n  }\n}\n\n\n\nasync function submitForm() {\n  try {\n    await getLocation();\n    const response = await fetch(\"/submit-form\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(this.inputs),\n    });\n    console.log(response);\n  } catch (error) {\n    console.error(\"Error submitting form:\", error);\n  }\n}\n\n    return {\n      getLocation,\n      registerTitle,\n      registerSubTitle,\n      userName,\n      firstName,\n      lastName,\n      password,\n      passwordConfirm,\n      send,\n      inputs,\n      maxLength,\n      validateEmail,\n      submitForm,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.register--container {\n  // border: solid 1px red;\n\n  // border: solid 1px red;\n  width: auto;\n  height: auto;\n  padding: 10px 35px 45px 35px;\n  border-radius: 15px;\n  background-image: linear-gradient(to right, #ff24a7af, #8890feb2);\n  box-shadow: 0 0 28px rgba(0, 0, 0, 0.498);\n  cursor: default;\n  user-select: none;\n\n  h3 {\n    margin: 10px 0 0 0;\n    color: white;\n    text-align: center;\n    font-weight: 900;\n    text-transform: capitalize;\n    font-size: calc(min(3vw + 2vh, 70px));\n    text-shadow: 0 0 18px rgba(255, 255, 255, 0.438);\n  }\n\n  #sub--title {\n    font-weight: 600;\n    font-size: calc(min(2vw + 1.6vh, 50px));\n    margin-bottom: 10px;\n  }\n\n  .register--form {\n    display: grid;\n    justify-items: center;\n\n    input {\n      padding: 6px;\n      margin: 10px;\n      width: 100%;\n      border: none;\n      outline: none;\n      border-radius: 8px;\n      text-align: center;\n      font-weight: 600;\n      // font-size: 1.2rem;\n      background-color: var(--purple-placeholder-bg);\n      color: var(--purple);\n    }\n\n    input::placeholder {\n      color: white;\n      font-weight: 400;\n\n      /* Couleur du placeholder */\n    }\n\n    .send--registration--btn {\n      margin-top: 25px;\n\n      // padding: 10px 30px 10px 30px;\n\n      height: 45px;\n      width: 180px;\n      border-radius: 10px;\n      border: none;\n      color: white;\n      font-weight: 600;\n      font-size: 1.2rem;\n\n      transition: all 0.4s;\n      cursor: pointer;\n      box-shadow: 0 0 6px rgba(0, 0, 0, 0.381);\n\n      background-image: linear-gradient(to right, #ff24a7af, #8890feb2);\n\n      &:hover {\n        background-image: linear-gradient(to right, #ff24a78a, #8890fe90);\n        /* Dégradé de couleur */\n        color: var(--purple);\n        transform: scale(1.1);\n      }\n    }\n\n    .disabled--btn {\n      opacity: 0.6;\n      cursor: default;\n\n      &:hover {\n        background-image: linear-gradient(to right, #ff24a7af, #8890feb2);\n        color: white;\n        transform: none;\n      }\n    }\n\n    @media (min-width: 800px) {\n      width: 70%;\n      margin: auto;\n    }\n  }\n\n  .disabled--input {\n    opacity: 0.5;\n  }\n}\n\n// .disabled {\n//     /* Vos styles pour le bouton désactivé */\n//     opacity: 0.5; /* Par exemple, réduire l'opacité */\n//     cursor: none; /* Changer le curseur */\n// }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}